# SPA Architecture Proposal: CloudAuditor Dashboard

The next iteration of CloudAuditor will feature a Single Page Application (SPA) to visualize multi-account resource data and provide report downloads.

## 1. Technology Stack
- **Frontend**: React.js with Vite
- **Styling**: TailwindCSS or Vanilla CSS (Glassmorphism theme)
- **Charts**: Recharts or Chart.js for resource roll-ups
- **Backend API**: FastAPI or AWS Lambda + API Gateway
- **Data Source**: Aurora Serverless v2 (PostgreSQL)

## 2. Key Views

### A. Global Discovery Dashboard (Summary Page)
- **Aggregated Stats**: Total resources across ALL Organizations and Accounts.
- **Visualizations**: 
    - Breadcrumb: Organization -> OU -> Account.
    - Pie chart: Resource distribution by Service (EC2, RDS, etc.).
    - Bar chart: Top 10 accounts by resource count.

### B. Account Detail View
- List of all resources for a selected AWS account.
- Search/Filter by ARN, Type, or Tags.

### C. Reporting Center
- **Generate Report**: Trigger a background discovery job.
- **Download Center**: Access historical Excel/JSON reports generated by the engine.

## 3. Data Roll-up Strategy
To support 4A (rolling up counts to OU/Org levels), we will implement a recursive CTE (Common Table Expression) in PostgreSQL that maps account IDs to their parent OUs and root Organizations.

## 4. Report Download Flow (4B)
1. User clicks "Download Report" for a specific account.
2. The SPA calls the API Gateway.
3. A Lambda function (using the `ExcelGenerator`) generates the report on-the-fly or fetches it from an S3 transition bucket.
4. The signed S3 URL is returned to the SPA for download.
